<template>
    <div class="progress-bar-wrap">

        <div class="progress-bar-start-cap"></div>

        <!-- Loop through all the pages and create the progress bar items for each page -->
        <template for:each={pagesArray} for:item="page" for:index="index">
            <!-- hacky way to keep track of current index of loop so I can conditionally show certain elements -->
            <div key={page} style="display:none;">{incrementIndexTracker}</div>

            <!-- Different types of buttons to output for the progress bar -->
            <!-- lots of repeated code here, so hopefully there's a better approach... -->
            <template lwc:if={isCompletedPage}>
                <button key={page} data-page={page} onclick={setPageNavigation}
                    class="progress-bar-item completed-page">
                    <label>{page}</label>
                </button>
            </template>
            <template lwc:elseif={isBeforeCurrentPage}>
                <button key={page} data-page={page} onclick={setPageNavigation} class="progress-bar-item previous-page">
                    <label>{page}</label>
                </button>
            </template>
            <template lwc:elseif={isCurrentPage}>
                <button key={page} data-page={page} onclick={setPageNavigation} class="progress-bar-item current-page">
                    <label>{page}</label>
                </button>
            </template>
            <template lwc:else>
                <button key={page} data-page={page} onclick={setPageNavigation} class="progress-bar-item future-page">
                    <label>{page}</label>
                </button>
            </template>
        </template>

        <div class="progress-bar-end-cap"></div>
    </div>
</template>